<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jurisdiction Risk - Evelyn Partners</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .form-container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .form-header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .form-header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .form-header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .form-content {
            padding: 40px;
        }

        .section {
            margin-bottom: 35px;
        }

        .section-title {
            font-size: 20px;
            color: #1e3c72;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .applicant-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-primary {
            background: #e3f2fd;
            color: #1976d2;
        }

        .badge-joint {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .info-box {
            background: #f0f7ff;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin-bottom: 25px;
            border-radius: 4px;
        }

        .info-box.warning {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
        }

        .info-box p {
            color: #1565c0;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 8px;
        }

        .info-box.warning p {
            color: #e65100;
        }

        .info-box p:last-child {
            margin-bottom: 0;
        }

        .info-box strong {
            display: block;
            margin-bottom: 5px;
        }

        .info-box ul {
            margin-left: 20px;
            margin-top: 8px;
        }

        .info-box li {
            margin-bottom: 4px;
        }

        .jurisdiction-card {
            background: #fafafa;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .jurisdiction-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 1px solid #ddd;
        }

        .jurisdiction-icon {
            font-size: 24px;
            min-width: 30px;
        }

        .jurisdiction-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            flex: 1;
        }

        .risk-indicator {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .risk-indicator.low {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .risk-indicator.medium {
            background: #fff3e0;
            color: #e65100;
        }

        .risk-indicator.high {
            background: #ffebee;
            color: #c62828;
        }

        .risk-indicator.pending {
            background: #e0e0e0;
            color: #666;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
            font-size: 14px;
        }

        .required {
            color: #d32f2f;
            margin-left: 3px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #2196F3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }

        .form-group input.error,
        .form-group select.error,
        .form-group textarea.error {
            border-color: #d32f2f;
        }

        .error-message {
            color: #d32f2f;
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        .help-text {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            font-style: italic;
        }

        .row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .country-select-wrapper {
            position: relative;
        }

        .country-flag {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 20px;
            pointer-events: none;
        }

        .form-group select.with-flag {
            padding-left: 45px;
        }

        .risk-explanation-box {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }

        .risk-explanation-box.active {
            display: block;
        }

        .risk-explanation-header {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .risk-explanation-text {
            font-size: 13px;
            color: #666;
            line-height: 1.6;
        }

        .overall-risk-summary {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
        }

        .summary-header {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .summary-item {
            background: #f5f5f5;
            padding: 12px;
            border-radius: 6px;
        }

        .summary-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }

        .summary-value {
            font-size: 16px;
            font-weight: 600;
            color: #333;
        }

        .overall-assessment {
            padding: 15px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .overall-assessment.low {
            background: #e8f5e9;
            border: 2px solid #4caf50;
        }

        .overall-assessment.medium {
            background: #fff3e0;
            border: 2px solid #ff9800;
        }

        .overall-assessment.high {
            background: #ffebee;
            border: 2px solid #f44336;
        }

        .assessment-label {
            font-size: 16px;
            font-weight: 600;
        }

        .assessment-label.low {
            color: #2e7d32;
        }

        .assessment-label.medium {
            color: #e65100;
        }

        .assessment-label.high {
            color: #c62828;
        }

        .assessment-badge {
            font-size: 18px;
            font-weight: 700;
            text-transform: uppercase;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px solid #e0e0e0;
        }

        .btn {
            flex: 1;
            padding: 14px 24px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn-secondary:hover {
            background: #f5f5f5;
        }

        @media (max-width: 768px) {
            .form-content {
                padding: 25px;
            }

            .row {
                grid-template-columns: 1fr;
            }

            .summary-grid {
                grid-template-columns: 1fr;
            }

            .button-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="form-container">
        <div class="form-header">
            <h1>Jurisdiction Risk Assessment</h1>
            <p>Country-Based Risk Evaluation | AML Compliance</p>
        </div>

        <div class="form-content">
            <form id="jurisdictionRiskForm">
                
                <!-- Primary Applicant Section -->
                <div class="section">
                    <h2 class="section-title">
                        <span>ğŸŒ</span>
                        <span>Country Connections</span>
                        <span class="applicant-badge badge-primary">Primary Applicant</span>
                    </h2>

                    <div class="info-box">
                        <p><strong>Purpose:</strong> This assessment evaluates financial crime risk based on your connections to different countries and jurisdictions.</p>
                        <p>We cross-reference your country connections against international risk lists including FATF high-risk jurisdictions, sanctioned countries, and regions with weak AML controls.</p>
                    </div>

                    <div class="info-box warning">
                        <p><strong>Risk Rating System:</strong></p>
                        <ul>
                            <li><strong>Low Risk:</strong> UK, EEA countries, and other established financial centers with strong AML frameworks</li>
                            <li><strong>Medium Risk:</strong> Countries with adequate but developing AML controls</li>
                            <li><strong>High Risk:</strong> FATF-listed jurisdictions, sanctioned countries, or those with weak AML/CTF controls</li>
                        </ul>
                    </div>

                    <!-- Country of Birth -->
                    <div class="jurisdiction-card">
                        <div class="jurisdiction-header">
                            <span class="jurisdiction-icon">ğŸ‘¶</span>
                            <span class="jurisdiction-title">Country of Birth</span>
                            <span class="risk-indicator pending" id="birth_risk_indicator">Not Assessed</span>
                        </div>
                        
                        <div class="form-group">
                            <label>Select Country <span class="required">*</span></label>
                            <select id="country_birth" name="country_birth" class="with-flag" onchange="assessCountryRisk('birth', this.value)">
                                <option value="">Please select...</option>
                                <optgroup label="Low Risk - UK & Crown Dependencies">
                                    <option value="GB">ğŸ‡¬ğŸ‡§ United Kingdom</option>
                                    <option value="JE">ğŸ‡¯ğŸ‡ª Jersey</option>
                                    <option value="GG">ğŸ‡¬ğŸ‡¬ Guernsey</option>
                                    <option value="IM">ğŸ‡®ğŸ‡² Isle of Man</option>
                                </optgroup>
                                <optgroup label="Low Risk - EEA Countries">
                                    <option value="AT">ğŸ‡¦ğŸ‡¹ Austria</option>
                                    <option value="BE">ğŸ‡§ğŸ‡ª Belgium</option>
                                    <option value="BG">ğŸ‡§ğŸ‡¬ Bulgaria</option>
                                    <option value="HR">ğŸ‡­ğŸ‡· Croatia</option>
                                    <option value="CY">ğŸ‡¨ğŸ‡¾ Cyprus</option>
                                    <option value="CZ">ğŸ‡¨ğŸ‡¿ Czech Republic</option>
                                    <option value="DK">ğŸ‡©ğŸ‡° Denmark</option>
                                    <option value="EE">ğŸ‡ªğŸ‡ª Estonia</option>
                                    <option value="FI">ğŸ‡«ğŸ‡® Finland</option>
                                    <option value="FR">ğŸ‡«ğŸ‡· France</option>
                                    <option value="DE">ğŸ‡©ğŸ‡ª Germany</option>
                                    <option value="GR">ğŸ‡¬ğŸ‡· Greece</option>
                                    <option value="HU">ğŸ‡­ğŸ‡º Hungary</option>
                                    <option value="IS">ğŸ‡®ğŸ‡¸ Iceland</option>
                                    <option value="IE">ğŸ‡®ğŸ‡ª Ireland</option>
                                    <option value="IT">ğŸ‡®ğŸ‡¹ Italy</option>
                                    <option value="LV">ğŸ‡±ğŸ‡» Latvia</option>
                                    <option value="LI">ğŸ‡±ğŸ‡® Liechtenstein</option>
                                    <option value="LT">ğŸ‡±ğŸ‡¹ Lithuania</option>
                                    <option value="LU">ğŸ‡±ğŸ‡º Luxembourg</option>
                                    <option value="MT">ğŸ‡²ğŸ‡¹ Malta</option>
                                    <option value="NL">ğŸ‡³ğŸ‡± Netherlands</option>
                                    <option value="NO">ğŸ‡³ğŸ‡´ Norway</option>
                                    <option value="PL">ğŸ‡µğŸ‡± Poland</option>
                                    <option value="PT">ğŸ‡µğŸ‡¹ Portugal</option>
                                    <option value="RO">ğŸ‡·ğŸ‡´ Romania</option>
                                    <option value="SK">ğŸ‡¸ğŸ‡° Slovakia</option>
                                    <option value="SI">ğŸ‡¸ğŸ‡® Slovenia</option>
                                    <option value="ES">ğŸ‡ªğŸ‡¸ Spain</option>
                                    <option value="SE">ğŸ‡¸ğŸ‡ª Sweden</option>
                                </optgroup>
                                <optgroup label="Low Risk - Other Established Markets">
                                    <option value="AU">ğŸ‡¦ğŸ‡º Australia</option>
                                    <option value="CA">ğŸ‡¨ğŸ‡¦ Canada</option>
                                    <option value="HK">ğŸ‡­ğŸ‡° Hong Kong</option>
                                    <option value="JP">ğŸ‡¯ğŸ‡µ Japan</option>
                                    <option value="NZ">ğŸ‡³ğŸ‡¿ New Zealand</option>
                                    <option value="SG">ğŸ‡¸ğŸ‡¬ Singapore</option>
                                    <option value="CH">ğŸ‡¨ğŸ‡­ Switzerland</option>
                                    <option value="US">ğŸ‡ºğŸ‡¸ United States</option>
                                </optgroup>
                                <optgroup label="Medium Risk Countries">
                                    <option value="AR">ğŸ‡¦ğŸ‡· Argentina</option>
                                    <option value="BR">ğŸ‡§ğŸ‡· Brazil</option>
                                    <option value="CN">ğŸ‡¨ğŸ‡³ China</option>
                                    <option value="IN">ğŸ‡®ğŸ‡³ India</option>
                                    <option value="ID">ğŸ‡®ğŸ‡© Indonesia</option>
                                    <option value="MY">ğŸ‡²ğŸ‡¾ Malaysia</option>
                                    <option value="MX">ğŸ‡²ğŸ‡½ Mexico</option>
                                    <option value="PH">ğŸ‡µğŸ‡­ Philippines</option>
                                    <option value="ZA">ğŸ‡¿ğŸ‡¦ South Africa</option>
                                    <option value="TH">ğŸ‡¹ğŸ‡­ Thailand</option>
                                    <option value="TR">ğŸ‡¹ğŸ‡· Turkey</option>
                                    <option value="AE">ğŸ‡¦ğŸ‡ª United Arab Emirates</option>
                                </optgroup>
                                <optgroup label="High Risk - FATF/Sanctioned Countries">
                                    <option value="AF">ğŸ‡¦ğŸ‡« Afghanistan</option>
                                    <option value="BY">ğŸ‡§ğŸ‡¾ Belarus</option>
                                    <option value="MM">ğŸ‡²ğŸ‡² Myanmar (Burma)</option>
                                    <option value="KH">ğŸ‡°ğŸ‡­ Cambodia</option>
                                    <option value="KP">ğŸ‡°ğŸ‡µ North Korea</option>
                                    <option value="IR">ğŸ‡®ğŸ‡· Iran</option>
                                    <option value="IQ">ğŸ‡®ğŸ‡¶ Iraq</option>
                                    <option value="LY">ğŸ‡±ğŸ‡¾ Libya</option>
                                    <option value="ML">ğŸ‡²ğŸ‡± Mali</option>
                                    <option value="NI">ğŸ‡³ğŸ‡® Nicaragua</option>
                                    <option value="PK">ğŸ‡µğŸ‡° Pakistan</option>
                                    <option value="PA">ğŸ‡µğŸ‡¦ Panama</option>
                                    <option value="RU">ğŸ‡·ğŸ‡º Russia</option>
                                    <option value="SO">ğŸ‡¸ğŸ‡´ Somalia</option>
                                    <option value="SS">ğŸ‡¸ğŸ‡¸ South Sudan</option>
                                    <option value="SD">ğŸ‡¸ğŸ‡© Sudan</option>
                                    <option value="SY">ğŸ‡¸ğŸ‡¾ Syria</option>
                                    <option value="VE">ğŸ‡»ğŸ‡ª Venezuela</option>
                                    <option value="YE">ğŸ‡¾ğŸ‡ª Yemen</option>
                                    <option value="ZW">ğŸ‡¿ğŸ‡¼ Zimbabwe</option>
                                </optgroup>
                                <optgroup label="Other Countries">
                                    <option value="OTHER">ğŸŒ Other (please specify)</option>
                                </optgroup>
                            </select>
                            <span class="error-message">Please select your country of birth</span>
                        </div>

                        <div class="form-group" id="birth_other_group" style="display: none;">
                            <label>Please specify country <span class="required">*</span></label>
                            <input type="text" id="country_birth_other" name="country_birth_other" placeholder="Enter country name">
                            <span class="error-message">Please specify the country</span>
                        </div>

                        <div class="risk-explanation-box" id="birth_risk_explanation">
                            <div class="risk-explanation-header">Risk Assessment:</div>
                            <div class="risk-explanation-text" id="birth_risk_text"></div>
                        </div>
                    </div>

                    <!-- Country of Residence -->
                    <div class="jurisdiction-card">
                        <div class="jurisdiction-header">
                            <span class="jurisdiction-icon">ğŸ </span>
                            <span class="jurisdiction-title">Country of Residence</span>
                            <span class="risk-indicator pending" id="residence_risk_indicator">Not Assessed</span>
                        </div>
                        
                        <div class="form-group">
                            <label>Select Country <span class="required">*</span></label>
                            <select id="country_residence" name="country_residence" class="with-flag" onchange="assessCountryRisk('residence', this.value)">
                                <option value="">Please select...</option>
                                <optgroup label="Low Risk - UK & Crown Dependencies">
                                    <option value="GB">ğŸ‡¬ğŸ‡§ United Kingdom</option>
                                    <option value="JE">ğŸ‡¯ğŸ‡ª Jersey</option>
                                    <option value="GG">ğŸ‡¬ğŸ‡¬ Guernsey</option>
                                    <option value="IM">ğŸ‡®ğŸ‡² Isle of Man</option>
                                </optgroup>
                                <optgroup label="Low Risk - EEA Countries">
                                    <option value="AT">ğŸ‡¦ğŸ‡¹ Austria</option>
                                    <option value="BE">ğŸ‡§ğŸ‡ª Belgium</option>
                                    <option value="BG">ğŸ‡§ğŸ‡¬ Bulgaria</option>
                                    <option value="HR">ğŸ‡­ğŸ‡· Croatia</option>
                                    <option value="CY">ğŸ‡¨ğŸ‡¾ Cyprus</option>
                                    <option value="CZ">ğŸ‡¨ğŸ‡¿ Czech Republic</option>
                                    <option value="DK">ğŸ‡©ğŸ‡° Denmark</option>
                                    <option value="EE">ğŸ‡ªğŸ‡ª Estonia</option>
                                    <option value="FI">ğŸ‡«ğŸ‡® Finland</option>
                                    <option value="FR">ğŸ‡«ğŸ‡· France</option>
                                    <option value="DE">ğŸ‡©ğŸ‡ª Germany</option>
                                    <option value="GR">ğŸ‡¬ğŸ‡· Greece</option>
                                    <option value="HU">ğŸ‡­ğŸ‡º Hungary</option>
                                    <option value="IS">ğŸ‡®ğŸ‡¸ Iceland</option>
                                    <option value="IE">ğŸ‡®ğŸ‡ª Ireland</option>
                                    <option value="IT">ğŸ‡®ğŸ‡¹ Italy</option>
                                    <option value="LV">ğŸ‡±ğŸ‡» Latvia</option>
                                    <option value="LI">ğŸ‡±ğŸ‡® Liechtenstein</option>
                                    <option value="LT">ğŸ‡±ğŸ‡¹ Lithuania</option>
                                    <option value="LU">ğŸ‡±ğŸ‡º Luxembourg</option>
                                    <option value="MT">ğŸ‡²ğŸ‡¹ Malta</option>
                                    <option value="NL">ğŸ‡³ğŸ‡± Netherlands</option>
                                    <option value="NO">ğŸ‡³ğŸ‡´ Norway</option>
                                    <option value="PL">ğŸ‡µğŸ‡± Poland</option>
                                    <option value="PT">ğŸ‡µğŸ‡¹ Portugal</option>
                                    <option value="RO">ğŸ‡·ğŸ‡´ Romania</option>
                                    <option value="SK">ğŸ‡¸ğŸ‡° Slovakia</option>
                                    <option value="SI">ğŸ‡¸ğŸ‡® Slovenia</option>
                                    <option value="ES">ğŸ‡ªğŸ‡¸ Spain</option>
                                    <option value="SE">ğŸ‡¸ğŸ‡ª Sweden</option>
                                </optgroup>
                                <optgroup label="Low Risk - Other Established Markets">
                                    <option value="AU">ğŸ‡¦ğŸ‡º Australia</option>
                                    <option value="CA">ğŸ‡¨ğŸ‡¦ Canada</option>
                                    <option value="HK">ğŸ‡­ğŸ‡° Hong Kong</option>
                                    <option value="JP">ğŸ‡¯ğŸ‡µ Japan</option>
                                    <option value="NZ">ğŸ‡³ğŸ‡¿ New Zealand</option>
                                    <option value="SG">ğŸ‡¸ğŸ‡¬ Singapore</option>
                                    <option value="CH">ğŸ‡¨ğŸ‡­ Switzerland</option>
                                    <option value="US">ğŸ‡ºğŸ‡¸ United States</option>
                                </optgroup>
                                <optgroup label="Medium Risk Countries">
                                    <option value="AR">ğŸ‡¦ğŸ‡· Argentina</option>
                                    <option value="BR">ğŸ‡§ğŸ‡· Brazil</option>
                                    <option value="CN">ğŸ‡¨ğŸ‡³ China</option>
                                    <option value="IN">ğŸ‡®ğŸ‡³ India</option>
                                    <option value="ID">ğŸ‡®ğŸ‡© Indonesia</option>
                                    <option value="MY">ğŸ‡²ğŸ‡¾ Malaysia</option>
                                    <option value="MX">ğŸ‡²ğŸ‡½ Mexico</option>
                                    <option value="PH">ğŸ‡µğŸ‡­ Philippines</option>
                                    <option value="ZA">ğŸ‡¿ğŸ‡¦ South Africa</option>
                                    <option value="TH">ğŸ‡¹ğŸ‡­ Thailand</option>
                                    <option value="TR">ğŸ‡¹ğŸ‡· Turkey</option>
                                    <option value="AE">ğŸ‡¦ğŸ‡ª United Arab Emirates</option>
                                </optgroup>
                                <optgroup label="High Risk - FATF/Sanctioned Countries">
                                    <option value="AF">ğŸ‡¦ğŸ‡« Afghanistan</option>
                                    <option value="BY">ğŸ‡§ğŸ‡¾ Belarus</option>
                                    <option value="MM">ğŸ‡²ğŸ‡² Myanmar (Burma)</option>
                                    <option value="KH">ğŸ‡°ğŸ‡­ Cambodia</option>
                                    <option value="KP">ğŸ‡°ğŸ‡µ North Korea</option>
                                    <option value="IR">ğŸ‡®ğŸ‡· Iran</option>
                                    <option value="IQ">ğŸ‡®ğŸ‡¶ Iraq</option>
                                    <option value="LY">ğŸ‡±ğŸ‡¾ Libya</option>
                                    <option value="ML">ğŸ‡²ğŸ‡± Mali</option>
                                    <option value="NI">ğŸ‡³ğŸ‡® Nicaragua</option>
                                    <option value="PK">ğŸ‡µğŸ‡° Pakistan</option>
                                    <option value="PA">ğŸ‡µğŸ‡¦ Panama</option>
                                    <option value="RU">ğŸ‡·ğŸ‡º Russia</option>
                                    <option value="SO">ğŸ‡¸ğŸ‡´ Somalia</option>
                                    <option value="SS">ğŸ‡¸ğŸ‡¸ South Sudan</option>
                                    <option value="SD">ğŸ‡¸ğŸ‡© Sudan</option>
                                    <option value="SY">ğŸ‡¸ğŸ‡¾ Syria</option>
                                    <option value="VE">ğŸ‡»ğŸ‡ª Venezuela</option>
                                    <option value="YE">ğŸ‡¾ğŸ‡ª Yemen</option>
                                    <option value="ZW">ğŸ‡¿ğŸ‡¼ Zimbabwe</option>
                                </optgroup>
                                <optgroup label="Other Countries">
                                    <option value="OTHER">ğŸŒ Other (please specify)</option>
                                </optgroup>
                            </select>
                            <span class="error-message">Please select your country of residence</span>
                        </div>

                        <div class="form-group" id="residence_other_group" style="display: none;">
                            <label>Please specify country <span class="required">*</span></label>
                            <input type="text" id="country_residence_other" name="country_residence_other" placeholder="Enter country name">
                            <span class="error-message">Please specify the country</span>
                        </div>

                        <div class="risk-explanation-box" id="residence_risk_explanation">
                            <div class="risk-explanation-header">Risk Assessment:</div>
                            <div class="risk-explanation-text" id="residence_risk_text"></div>
                        </div>
                    </div>

                    <!-- Nationality -->
                    <div class="jurisdiction-card">
                        <div class="jurisdiction-header">
                            <span class="jurisdiction-icon">ğŸ›‚</span>
                            <span class="jurisdiction-title">Nationality / Citizenship</span>
                            <span class="risk-indicator pending" id="nationality_risk_indicator">Not Assessed</span>
                        </div>
                        
                        <div class="form-group">
                            <label>Select Country <span class="required">*</span></label>
                            <select id="country_nationality" name="country_nationality" class="with-flag" onchange="assessCountryRisk('nationality', this.value)">
                                <option value="">Please select...</option>
                                <optgroup label="Low Risk - UK & Crown Dependencies">
                                    <option value="GB">ğŸ‡¬ğŸ‡§ United Kingdom</option>
                                    <option value="JE">ğŸ‡¯ğŸ‡ª Jersey</option>
                                    <option value="GG">ğŸ‡¬ğŸ‡¬ Guernsey</option>
                                    <option value="IM">ğŸ‡®ğŸ‡² Isle of Man</option>
                                </optgroup>
                                <optgroup label="Low Risk - EEA Countries">
                                    <option value="AT">ğŸ‡¦ğŸ‡¹ Austria</option>
                                    <option value="BE">ğŸ‡§ğŸ‡ª Belgium</option>
                                    <option value="BG">ğŸ‡§ğŸ‡¬ Bulgaria</option>
                                    <option value="HR">ğŸ‡­ğŸ‡· Croatia</option>
                                    <option value="CY">ğŸ‡¨ğŸ‡¾ Cyprus</option>
                                    <option value="CZ">ğŸ‡¨ğŸ‡¿ Czech Republic</option>
                                    <option value="DK">ğŸ‡©ğŸ‡° Denmark</option>
                                    <option value="EE">ğŸ‡ªğŸ‡ª Estonia</option>
                                    <option value="FI">ğŸ‡«ğŸ‡® Finland</option>
                                    <option value="FR">ğŸ‡«ğŸ‡· France</option>
                                    <option value="DE">ğŸ‡©ğŸ‡ª Germany</option>
                                    <option value="GR">ğŸ‡¬ğŸ‡· Greece</option>
                                    <option value="HU">ğŸ‡­ğŸ‡º Hungary</option>
                                    <option value="IS">ğŸ‡®ğŸ‡¸ Iceland</option>
                                    <option value="IE">ğŸ‡®ğŸ‡ª Ireland</option>
                                    <option value="IT">ğŸ‡®ğŸ‡¹ Italy</option>
                                    <option value="LV">ğŸ‡±ğŸ‡» Latvia</option>
                                    <option value="LI">ğŸ‡±ğŸ‡® Liechtenstein</option>
                                    <option value="LT">ğŸ‡±ğŸ‡¹ Lithuania</option>
                                    <option value="LU">ğŸ‡±ğŸ‡º Luxembourg</option>
                                    <option value="MT">ğŸ‡²ğŸ‡¹ Malta</option>
                                    <option value="NL">ğŸ‡³ğŸ‡± Netherlands</option>
                                    <option value="NO">ğŸ‡³ğŸ‡´ Norway</option>
                                    <option value="PL">ğŸ‡µğŸ‡± Poland</option>
                                    <option value="PT">ğŸ‡µğŸ‡¹ Portugal</option>
                                    <option value="RO">ğŸ‡·ğŸ‡´ Romania</option>
                                    <option value="SK">ğŸ‡¸ğŸ‡° Slovakia</option>
                                    <option value="SI">ğŸ‡¸ğŸ‡® Slovenia</option>
                                    <option value="ES">ğŸ‡ªğŸ‡¸ Spain</option>
                                    <option value="SE">ğŸ‡¸ğŸ‡ª Sweden</option>
                                </optgroup>
                                <optgroup label="Low Risk - Other Established Markets">
                                    <option value="AU">ğŸ‡¦ğŸ‡º Australia</option>
                                    <option value="CA">ğŸ‡¨ğŸ‡¦ Canada</option>
                                    <option value="HK">ğŸ‡­ğŸ‡° Hong Kong</option>
                                    <option value="JP">ğŸ‡¯ğŸ‡µ Japan</option>
                                    <option value="NZ">ğŸ‡³ğŸ‡¿ New Zealand</option>
                                    <option value="SG">ğŸ‡¸ğŸ‡¬ Singapore</option>
                                    <option value="CH">ğŸ‡¨ğŸ‡­ Switzerland</option>
                                    <option value="US">ğŸ‡ºğŸ‡¸ United States</option>
                                </optgroup>
                                <optgroup label="Medium Risk Countries">
                                    <option value="AR">ğŸ‡¦ğŸ‡· Argentina</option>
                                    <option value="BR">ğŸ‡§ğŸ‡· Brazil</option>
                                    <option value="CN">ğŸ‡¨ğŸ‡³ China</option>
                                    <option value="IN">ğŸ‡®ğŸ‡³ India</option>
                                    <option value="ID">ğŸ‡®ğŸ‡© Indonesia</option>
                                    <option value="MY">ğŸ‡²ğŸ‡¾ Malaysia</option>
                                    <option value="MX">ğŸ‡²ğŸ‡½ Mexico</option>
                                    <option value="PH">ğŸ‡µğŸ‡­ Philippines</option>
                                    <option value="ZA">ğŸ‡¿ğŸ‡¦ South Africa</option>
                                    <option value="TH">ğŸ‡¹ğŸ‡­ Thailand</option>
                                    <option value="TR">ğŸ‡¹ğŸ‡· Turkey</option>
                                    <option value="AE">ğŸ‡¦ğŸ‡ª United Arab Emirates</option>
                                </optgroup>
                                <optgroup label="High Risk - FATF/Sanctioned Countries">
                                    <option value="AF">ğŸ‡¦ğŸ‡« Afghanistan</option>
                                    <option value="BY">ğŸ‡§ğŸ‡¾ Belarus</option>
                                    <option value="MM">ğŸ‡²ğŸ‡² Myanmar (Burma)</option>
                                    <option value="KH">ğŸ‡°ğŸ‡­ Cambodia</option>
                                    <option value="KP">ğŸ‡°ğŸ‡µ North Korea</option>
                                    <option value="IR">ğŸ‡®ğŸ‡· Iran</option>
                                    <option value="IQ">ğŸ‡®ğŸ‡¶ Iraq</option>
                                    <option value="LY">ğŸ‡±ğŸ‡¾ Libya</option>
                                    <option value="ML">ğŸ‡²ğŸ‡± Mali</option>
                                    <option value="NI">ğŸ‡³ğŸ‡® Nicaragua</option>
                                    <option value="PK">ğŸ‡µğŸ‡° Pakistan</option>
                                    <option value="PA">ğŸ‡µğŸ‡¦ Panama</option>
                                    <option value="RU">ğŸ‡·ğŸ‡º Russia</option>
                                    <option value="SO">ğŸ‡¸ğŸ‡´ Somalia</option>
                                    <option value="SS">ğŸ‡¸ğŸ‡¸ South Sudan</option>
                                    <option value="SD">ğŸ‡¸ğŸ‡© Sudan</option>
                                    <option value="SY">ğŸ‡¸ğŸ‡¾ Syria</option>
                                    <option value="VE">ğŸ‡»ğŸ‡ª Venezuela</option>
                                    <option value="YE">ğŸ‡¾ğŸ‡ª Yemen</option>
                                    <option value="ZW">ğŸ‡¿ğŸ‡¼ Zimbabwe</option>
                                </optgroup>
                                <optgroup label="Other Countries">
                                    <option value="OTHER">ğŸŒ Other (please specify)</option>
                                </optgroup>
                            </select>
                            <span class="error-message">Please select your nationality</span>
                        </div>

                        <div class="form-group" id="nationality_other_group" style="display: none;">
                            <label>Please specify country <span class="required">*</span></label>
                            <input type="text" id="country_nationality_other" name="country_nationality_other" placeholder="Enter country name">
                            <span class="error-message">Please specify the country</span>
                        </div>

                        <div class="risk-explanation-box" id="nationality_risk_explanation">
                            <div class="risk-explanation-header">Risk Assessment:</div>
                            <div class="risk-explanation-text" id="nationality_risk_text"></div>
                        </div>
                    </div>

                    <!-- Overall Risk Summary -->
                    <div class="overall-risk-summary">
                        <div class="summary-header">Jurisdiction Risk Summary</div>
                        <div class="summary-grid">
                            <div class="summary-item">
                                <div class="summary-label">Birth Country Risk</div>
                                <div class="summary-value" id="birth_summary">Not Assessed</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Residence Country Risk</div>
                                <div class="summary-value" id="residence_summary">Not Assessed</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Nationality Risk</div>
                                <div class="summary-value" id="nationality_summary">Not Assessed</div>
                            </div>
                        </div>
                        <div class="overall-assessment low" id="overall_assessment_primary">
                            <span class="assessment-label low">Overall Jurisdiction Risk:</span>
                            <span class="assessment-badge low">LOW RISK</span>
                        </div>
                    </div>
                </div>

                <!-- Joint Applicant Section -->
                <div class="section" id="jointSection" style="display: none;">
                    <h2 class="section-title">
                        <span>ğŸŒ</span>
                        <span>Country Connections</span>
                        <span class="applicant-badge badge-joint">Joint Applicant</span>
                    </h2>

                    <div class="info-box">
                        <p><strong>Purpose:</strong> This assessment evaluates financial crime risk based on your connections to different countries and jurisdictions.</p>
                    </div>

                    <!-- Country of Birth - Customer 2 -->
                    <div class="jurisdiction-card">
                        <div class="jurisdiction-header">
                            <span class="jurisdiction-icon">ğŸ‘¶</span>
                            <span class="jurisdiction-title">Country of Birth</span>
                            <span class="risk-indicator pending" id="birth_risk_indicator_customer2">Not Assessed</span>
                        </div>
                        
                        <div class="form-group">
                            <label>Select Country <span class="required">*</span></label>
                            <select id="country_birth_customer2" name="country_birth_customer2" class="with-flag" onchange="assessCountryRisk('birth_customer2', this.value)">
                                <option value="">Please select...</option>
                                <!-- Same country options as primary applicant -->
                                <optgroup label="Low Risk - UK & Crown Dependencies">
                                    <option value="GB">ğŸ‡¬ğŸ‡§ United Kingdom</option>
                                    <option value="JE">ğŸ‡¯ğŸ‡ª Jersey</option>
                                    <option value="GG">ğŸ‡¬ğŸ‡¬ Guernsey</option>
                                    <option value="IM">ğŸ‡®ğŸ‡² Isle of Man</option>
                                </optgroup>
                                <optgroup label="Low Risk - EEA Countries">
                                    <option value="AT">ğŸ‡¦ğŸ‡¹ Austria</option>
                                    <option value="BE">ğŸ‡§ğŸ‡ª Belgium</option>
                                    <option value="FR">ğŸ‡«ğŸ‡· France</option>
                                    <option value="DE">ğŸ‡©ğŸ‡ª Germany</option>
                                    <option value="IE">ğŸ‡®ğŸ‡ª Ireland</option>
                                    <option value="IT">ğŸ‡®ğŸ‡¹ Italy</option>
                                    <option value="NL">ğŸ‡³ğŸ‡± Netherlands</option>
                                    <option value="ES">ğŸ‡ªğŸ‡¸ Spain</option>
                                    <option value="SE">ğŸ‡¸ğŸ‡ª Sweden</option>
                                </optgroup>
                                <optgroup label="Low Risk - Other Established Markets">
                                    <option value="AU">ğŸ‡¦ğŸ‡º Australia</option>
                                    <option value="CA">ğŸ‡¨ğŸ‡¦ Canada</option>
                                    <option value="HK">ğŸ‡­ğŸ‡° Hong Kong</option>
                                    <option value="JP">ğŸ‡¯ğŸ‡µ Japan</option>
                                    <option value="NZ">ğŸ‡³ğŸ‡¿ New Zealand</option>
                                    <option value="SG">ğŸ‡¸ğŸ‡¬ Singapore</option>
                                    <option value="CH">ğŸ‡¨ğŸ‡­ Switzerland</option>
                                    <option value="US">ğŸ‡ºğŸ‡¸ United States</option>
                                </optgroup>
                                <optgroup label="Medium Risk Countries">
                                    <option value="CN">ğŸ‡¨ğŸ‡³ China</option>
                                    <option value="IN">ğŸ‡®ğŸ‡³ India</option>
                                    <option value="BR">ğŸ‡§ğŸ‡· Brazil</option>
                                    <option value="ZA">ğŸ‡¿ğŸ‡¦ South Africa</option>
                                    <option value="AE">ğŸ‡¦ğŸ‡ª United Arab Emirates</option>
                                </optgroup>
                                <optgroup label="High Risk - FATF/Sanctioned Countries">
                                    <option value="AF">ğŸ‡¦ğŸ‡« Afghanistan</option>
                                    <option value="IR">ğŸ‡®ğŸ‡· Iran</option>
                                    <option value="KP">ğŸ‡°ğŸ‡µ North Korea</option>
                                    <option value="RU">ğŸ‡·ğŸ‡º Russia</option>
                                    <option value="SY">ğŸ‡¸ğŸ‡¾ Syria</option>
                                    <option value="VE">ğŸ‡»ğŸ‡ª Venezuela</option>
                                </optgroup>
                                <optgroup label="Other Countries">
                                    <option value="OTHER">ğŸŒ Other (please specify)</option>
                                </optgroup>
                            </select>
                            <span class="error-message">Please select country of birth</span>
                        </div>

                        <div class="form-group" id="birth_other_group_customer2" style="display: none;">
                            <label>Please specify country <span class="required">*</span></label>
                            <input type="text" id="country_birth_other_customer2" name="country_birth_other_customer2" placeholder="Enter country name">
                            <span class="error-message">Please specify the country</span>
                        </div>

                        <div class="risk-explanation-box" id="birth_risk_explanation_customer2">
                            <div class="risk-explanation-header">Risk Assessment:</div>
                            <div class="risk-explanation-text" id="birth_risk_text_customer2"></div>
                        </div>
                    </div>

                    <!-- Country of Residence - Customer 2 -->
                    <div class="jurisdiction-card">
                        <div class="jurisdiction-header">
                            <span class="jurisdiction-icon">ğŸ </span>
                            <span class="jurisdiction-title">Country of Residence</span>
                            <span class="risk-indicator pending" id="residence_risk_indicator_customer2">Not Assessed</span>
                        </div>
                        
                        <div class="form-group">
                            <label>Select Country <span class="required">*</span></label>
                            <select id="country_residence_customer2" name="country_residence_customer2" class="with-flag" onchange="assessCountryRisk('residence_customer2', this.value)">
                                <option value="">Please select...</option>
                                <!-- Same country options -->
                                <optgroup label="Low Risk - UK & Crown Dependencies">
                                    <option value="GB">ğŸ‡¬ğŸ‡§ United Kingdom</option>
                                </optgroup>
                                <optgroup label="Low Risk - EEA Countries">
                                    <option value="FR">ğŸ‡«ğŸ‡· France</option>
                                    <option value="DE">ğŸ‡©ğŸ‡ª Germany</option>
                                </optgroup>
                                <optgroup label="Other Countries">
                                    <option value="OTHER">ğŸŒ Other (please specify)</option>
                                </optgroup>
                            </select>
                            <span class="error-message">Please select country of residence</span>
                        </div>

                        <div class="form-group" id="residence_other_group_customer2" style="display: none;">
                            <label>Please specify country <span class="required">*</span></label>
                            <input type="text" id="country_residence_other_customer2" name="country_residence_other_customer2" placeholder="Enter country name">
                            <span class="error-message">Please specify the country</span>
                        </div>

                        <div class="risk-explanation-box" id="residence_risk_explanation_customer2">
                            <div class="risk-explanation-header">Risk Assessment:</div>
                            <div class="risk-explanation-text" id="residence_risk_text_customer2"></div>
                        </div>
                    </div>

                    <!-- Nationality - Customer 2 -->
                    <div class="jurisdiction-card">
                        <div class="jurisdiction-header">
                            <span class="jurisdiction-icon">ğŸ›‚</span>
                            <span class="jurisdiction-title">Nationality / Citizenship</span>
                            <span class="risk-indicator pending" id="nationality_risk_indicator_customer2">Not Assessed</span>
                        </div>
                        
                        <div class="form-group">
                            <label>Select Country <span class="required">*</span></label>
                            <select id="country_nationality_customer2" name="country_nationality_customer2" class="with-flag" onchange="assessCountryRisk('nationality_customer2', this.value)">
                                <option value="">Please select...</option>
                                <!-- Same country options -->
                                <optgroup label="Low Risk - UK & Crown Dependencies">
                                    <option value="GB">ğŸ‡¬ğŸ‡§ United Kingdom</option>
                                </optgroup>
                                <optgroup label="Other Countries">
                                    <option value="OTHER">ğŸŒ Other (please specify)</option>
                                </optgroup>
                            </select>
                            <span class="error-message">Please select nationality</span>
                        </div>

                        <div class="form-group" id="nationality_other_group_customer2" style="display: none;">
                            <label>Please specify country <span class="required">*</span></label>
                            <input type="text" id="country_nationality_other_customer2" name="country_nationality_other_customer2" placeholder="Enter country name">
                            <span class="error-message">Please specify the country</span>
                        </div>

                        <div class="risk-explanation-box" id="nationality_risk_explanation_customer2">
                            <div class="risk-explanation-header">Risk Assessment:</div>
                            <div class="risk-explanation-text" id="nationality_risk_text_customer2"></div>
                        </div>
                    </div>

                    <!-- Overall Risk Summary - Customer 2 -->
                    <div class="overall-risk-summary">
                        <div class="summary-header">Jurisdiction Risk Summary</div>
                        <div class="summary-grid">
                            <div class="summary-item">
                                <div class="summary-label">Birth Country Risk</div>
                                <div class="summary-value" id="birth_summary_customer2">Not Assessed</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Residence Country Risk</div>
                                <div class="summary-value" id="residence_summary_customer2">Not Assessed</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Nationality Risk</div>
                                <div class="summary-value" id="nationality_summary_customer2">Not Assessed</div>
                            </div>
                        </div>
                        <div class="overall-assessment low" id="overall_assessment_customer2">
                            <span class="assessment-label low">Overall Jurisdiction Risk:</span>
                            <span class="assessment-badge low">LOW RISK</span>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button type="button" class="btn btn-secondary" onclick="window.history.back()">â† Previous</button>
                    <button type="submit" class="btn btn-primary">Save & Continue â†’</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Check URL parameters for joint application
        const urlParams = new URLSearchParams(window.location.search);
        const isJoint = urlParams.get('joint') === 'true';

        if (isJoint) {
            document.getElementById('jointSection').style.display = 'block';
        }

        // Country risk database
        const countryRiskData = {
            // Low Risk - UK & Crown Dependencies
            'GB': { risk: 'low', name: 'United Kingdom' },
            'JE': { risk: 'low', name: 'Jersey' },
            'GG': { risk: 'low', name: 'Guernsey' },
            'IM': { risk: 'low', name: 'Isle of Man' },
            
            // Low Risk - EEA
            'AT': { risk: 'low', name: 'Austria' },
            'BE': { risk: 'low', name: 'Belgium' },
            'BG': { risk: 'low', name: 'Bulgaria' },
            'HR': { risk: 'low', name: 'Croatia' },
            'CY': { risk: 'low', name: 'Cyprus' },
            'CZ': { risk: 'low', name: 'Czech Republic' },
            'DK': { risk: 'low', name: 'Denmark' },
            'EE': { risk: 'low', name: 'Estonia' },
            'FI': { risk: 'low', name: 'Finland' },
            'FR': { risk: 'low', name: 'France' },
            'DE': { risk: 'low', name: 'Germany' },
            'GR': { risk: 'low', name: 'Greece' },
            'HU': { risk: 'low', name: 'Hungary' },
            'IS': { risk: 'low', name: 'Iceland' },
            'IE': { risk: 'low', name: 'Ireland' },
            'IT': { risk: 'low', name: 'Italy' },
            'LV': { risk: 'low', name: 'Latvia' },
            'LI': { risk: 'low', name: 'Liechtenstein' },
            'LT': { risk: 'low', name: 'Lithuania' },
            'LU': { risk: 'low', name: 'Luxembourg' },
            'MT': { risk: 'low', name: 'Malta' },
            'NL': { risk: 'low', name: 'Netherlands' },
            'NO': { risk: 'low', name: 'Norway' },
            'PL': { risk: 'low', name: 'Poland' },
            'PT': { risk: 'low', name: 'Portugal' },
            'RO': { risk: 'low', name: 'Romania' },
            'SK': { risk: 'low', name: 'Slovakia' },
            'SI': { risk: 'low', name: 'Slovenia' },
            'ES': { risk: 'low', name: 'Spain' },
            'SE': { risk: 'low', name: 'Sweden' },
            
            // Low Risk - Other
            'AU': { risk: 'low', name: 'Australia' },
            'CA': { risk: 'low', name: 'Canada' },
            'HK': { risk: 'low', name: 'Hong Kong' },
            'JP': { risk: 'low', name: 'Japan' },
            'NZ': { risk: 'low', name: 'New Zealand' },
            'SG': { risk: 'low', name: 'Singapore' },
            'CH': { risk: 'low', name: 'Switzerland' },
            'US': { risk: 'low', name: 'United States' },
            
            // Medium Risk
            'AR': { risk: 'medium', name: 'Argentina' },
            'BR': { risk: 'medium', name: 'Brazil' },
            'CN': { risk: 'medium', name: 'China' },
            'IN': { risk: 'medium', name: 'India' },
            'ID': { risk: 'medium', name: 'Indonesia' },
            'MY': { risk: 'medium', name: 'Malaysia' },
            'MX': { risk: 'medium', name: 'Mexico' },
            'PH': { risk: 'medium', name: 'Philippines' },
            'ZA': { risk: 'medium', name: 'South Africa' },
            'TH': { risk: 'medium', name: 'Thailand' },
            'TR': { risk: 'medium', name: 'Turkey' },
            'AE': { risk: 'medium', name: 'United Arab Emirates' },
            
            // High Risk
            'AF': { risk: 'high', name: 'Afghanistan', reason: 'FATF-listed jurisdiction' },
            'BY': { risk: 'high', name: 'Belarus', reason: 'Sanctions and weak AML controls' },
            'MM': { risk: 'high', name: 'Myanmar', reason: 'FATF-listed jurisdiction' },
            'KH': { risk: 'high', name: 'Cambodia', reason: 'Enhanced monitoring' },
            'KP': { risk: 'high', name: 'North Korea', reason: 'Comprehensive sanctions' },
            'IR': { risk: 'high', name: 'Iran', reason: 'FATF-listed jurisdiction' },
            'IQ': { risk: 'high', name: 'Iraq', reason: 'Enhanced monitoring' },
            'LY': { risk: 'high', name: 'Libya', reason: 'Sanctions and instability' },
            'ML': { risk: 'high', name: 'Mali', reason: 'Enhanced monitoring' },
            'NI': { risk: 'high', name: 'Nicaragua', reason: 'FATF concerns' },
            'PK': { risk: 'high', name: 'Pakistan', reason: 'Enhanced monitoring' },
            'PA': { risk: 'high', name: 'Panama', reason: 'Enhanced monitoring' },
            'RU': { risk: 'high', name: 'Russia', reason: 'Comprehensive sanctions' },
            'SO': { risk: 'high', name: 'Somalia', reason: 'FATF concerns' },
            'SS': { risk: 'high', name: 'South Sudan', reason: 'Enhanced monitoring' },
            'SD': { risk: 'high', name: 'Sudan', reason: 'Sanctions' },
            'SY': { risk: 'high', name: 'Syria', reason: 'Comprehensive sanctions' },
            'VE': { risk: 'high', name: 'Venezuela', reason: 'Sanctions and weak controls' },
            'YE': { risk: 'high', name: 'Yemen', reason: 'FATF concerns' },
            'ZW': { risk: 'high', name: 'Zimbabwe', reason: 'Sanctions and weak controls' }
        };

        // Assess country risk
        function assessCountryRisk(fieldType, countryCode) {
            const isCustomer2 = fieldType.includes('customer2');
            const baseType = fieldType.replace('_customer2', '');
            const suffix = isCustomer2 ? '_customer2' : '';
            
            // Show/hide "other" field
            const otherGroup = document.getElementById(baseType + '_other_group' + suffix);
            if (countryCode === 'OTHER') {
                otherGroup.style.display = 'block';
            } else {
                otherGroup.style.display = 'none';
                const otherInput = document.getElementById('country_' + baseType + '_other' + suffix);
                if (otherInput) otherInput.value = '';
            }
            
            if (!countryCode || countryCode === 'OTHER') {
                return;
            }
            
            const countryData = countryRiskData[countryCode];
            const risk = countryData ? countryData.risk : 'medium';
            const countryName = countryData ? countryData.name : 'Unknown';
            
            // Update risk indicator
            const indicator = document.getElementById(baseType + '_risk_indicator' + suffix);
            indicator.className = 'risk-indicator ' + risk;
            indicator.textContent = risk.charAt(0).toUpperCase() + risk.slice(1) + ' Risk';
            
            // Show explanation
            const explanationBox = document.getElementById(baseType + '_risk_explanation' + suffix);
            const explanationText = document.getElementById(baseType + '_risk_text' + suffix);
            
            let riskText = '';
            if (risk === 'low') {
                riskText = `${countryName} is classified as LOW RISK. This jurisdiction has established AML/CTF frameworks and strong regulatory oversight.`;
            } else if (risk === 'medium') {
                riskText = `${countryName} is classified as MEDIUM RISK. Enhanced due diligence may be required. This jurisdiction has adequate but developing AML controls.`;
            } else if (risk === 'high') {
                riskText = `${countryName} is classified as HIGH RISK${countryData.reason ? ' - ' + countryData.reason : ''}. Enhanced due diligence and senior management approval required.`;
            }
            
            explanationText.textContent = riskText;
            explanationBox.classList.add('active');
            
            // Update summary
            const summary = document.getElementById(baseType + '_summary' + suffix);
            summary.textContent = risk.charAt(0).toUpperCase() + risk.slice(1) + ' Risk';
            summary.style.color = risk === 'low' ? '#2e7d32' : (risk === 'medium' ? '#e65100' : '#c62828');
            
            // Update overall assessment
            updateOverallRisk(isCustomer2 ? 'customer2' : 'primary');
        }

        // Update overall risk assessment
        function updateOverallRisk(applicant) {
            const suffix = applicant === 'customer2' ? '_customer2' : '';
            const types = ['birth', 'residence', 'nationality'];
            
            let hasHigh = false;
            let hasMedium = false;
            let allAssessed = true;
            
            types.forEach(type => {
                const select = document.getElementById('country_' + type + suffix);
                if (!select || !select.value || select.value === 'OTHER') {
                    allAssessed = false;
                } else {
                    const countryData = countryRiskData[select.value];
                    if (countryData) {
                        if (countryData.risk === 'high') hasHigh = true;
                        else if (countryData.risk === 'medium') hasMedium = true;
                    }
                }
            });
            
            const overallAssessment = document.getElementById('overall_assessment_' + applicant);
            const label = overallAssessment.querySelector('.assessment-label');
            const badge = overallAssessment.querySelector('.assessment-badge');
            
            let overallRisk = 'low';
            let riskText = 'LOW RISK';
            
            if (!allAssessed) {
                riskText = 'PENDING';
            } else if (hasHigh) {
                overallRisk = 'high';
                riskText = 'HIGH RISK';
            } else if (hasMedium) {
                overallRisk = 'medium';
                riskText = 'MEDIUM RISK';
            }
            
            overallAssessment.className = 'overall-assessment ' + overallRisk;
            label.className = 'assessment-label ' + overallRisk;
            badge.className = 'assessment-badge ' + overallRisk;
            badge.textContent = riskText;
        }

        // Form validation
        document.getElementById('jurisdictionRiskForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            let isValid = true;
            
            // Validate primary applicant
            ['birth', 'residence', 'nationality'].forEach(type => {
                const select = document.getElementById('country_' + type);
                if (!select.value) {
                    select.classList.add('error');
                    select.parentElement.querySelector('.error-message').classList.add('show');
                    isValid = false;
                } else {
                    select.classList.remove('error');
                    select.parentElement.querySelector('.error-message').classList.remove('show');
                    
                    // Validate "other" field if needed
                    if (select.value === 'OTHER') {
                        const otherInput = document.getElementById('country_' + type + '_other');
                        if (!otherInput.value.trim()) {
                            otherInput.classList.add('error');
                            otherInput.parentElement.querySelector('.error-message').classList.add('show');
                            isValid = false;
                        } else {
                            otherInput.classList.remove('error');
                            otherInput.parentElement.querySelector('.error-message').classList.remove('show');
                        }
                    }
                }
            });
            
            // Validate joint applicant if applicable
            if (isJoint) {
                ['birth', 'residence', 'nationality'].forEach(type => {
                    const select = document.getElementById('country_' + type + '_customer2');
                    if (!select.value) {
                        select.classList.add('error');
                        select.parentElement.querySelector('.error-message').classList.add('show');
                        isValid = false;
                    } else {
                        select.classList.remove('error');
                        select.parentElement.querySelector('.error-message').classList.remove('show');
                        
                        if (select.value === 'OTHER') {
                            const otherInput = document.getElementById('country_' + type + '_other_customer2');
                            if (!otherInput.value.trim()) {
                                otherInput.classList.add('error');
                                otherInput.parentElement.querySelector('.error-message').classList.add('show');
                                isValid = false;
                            } else {
                                otherInput.classList.remove('error');
                                otherInput.parentElement.querySelector('.error-message').classList.remove('show');
                            }
                        }
                    }
                });
            }
            
            if (isValid) {
                alert('Form validated successfully! Data would be submitted here.');
                console.log('Form data:', new FormData(this));
            } else {
                alert('Please correct the errors highlighted in red.');
            }
        });

        // Auto-populate from URL parameters (for n8n integration)
        window.addEventListener('DOMContentLoaded', function() {
            const params = new URLSearchParams(window.location.search);
            
            params.forEach((value, key) => {
                const field = document.getElementById(key);
                if (field) {
                    field.value = decodeURIComponent(value);
                    if (field.tagName === 'SELECT') {
                        field.dispatchEvent(new Event('change'));
                    }
                }
            });
        });
    </script>
</body>
</html>

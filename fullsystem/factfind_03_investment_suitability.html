<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investment Suitability | Evelyn Partners Fact Find</title>
    <style>
        :root {
            /* Primary Brand Colours - Evelyn Partners Rebrand */
            --primary: #2D2047;
            --primary-dark: #1E1530;
            --primary-light: #6B3FA0;
            
            /* Secondary Accent Colours */
            --accent-teal: #34675C;
            --accent-coral: #E07065;
            --accent-blue: #5299E0;
            --accent-gold: #C4A35A;
            
            /* Semantic Colours */
            --success: #28a745;
            --success-light: #d4edda;
            --warning: #ffc107;
            --danger: #dc3545;
            
            /* Neutral Grays */
            --gray-50: #f8f9fa;
            --gray-100: #f0f1f3;
            --gray-200: #e9ecef;
            --gray-300: #dee2e6;
            --gray-400: #ced4da;
            --gray-500: #adb5bd;
            --gray-600: #6c757d;
            --gray-700: #495057;
            --gray-800: #343a40;
            --gray-900: #212529;
            
            /* UI Properties */
            --border-radius: 8px;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.1);
            --transition: all 0.2s ease;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--gray-100);
            color: var(--gray-800);
            line-height: 1.6;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-md);
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .logo { font-size: 20px; font-weight: 600; }
        .type-badge { background: rgba(255,255,255,0.2); padding: 6px 14px; border-radius: 20px; font-size: 13px; font-weight: 500; }
        .header-main { padding: 20px 24px; }
        .journey-title { font-size: 14px; opacity: 0.9; margin-bottom: 4px; }
        .section-title { font-size: 24px; font-weight: 600; margin-bottom: 8px; }
        .section-description { font-size: 14px; opacity: 0.85; }

        .progress-container { background: rgba(0,0,0,0.2); padding: 16px 24px; }
        .progress-label { display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 8px; opacity: 0.9; }
        .progress-bar { height: 6px; background: rgba(255,255,255,0.3); border-radius: 3px; overflow: hidden; }
        .progress-fill { height: 100%; background: white; border-radius: 3px; transition: width 0.3s ease; }
        .progress-steps { display: flex; justify-content: space-between; margin-top: 12px; }
        .progress-step { display: flex; flex-direction: column; align-items: center; font-size: 10px; opacity: 0.7; cursor: pointer; transition: var(--transition); }
        .progress-step:hover, .progress-step.active, .progress-step.completed { opacity: 1; }
        .step-dot { width: 12px; height: 12px; border-radius: 50%; background: rgba(255,255,255,0.3); margin-bottom: 4px; transition: var(--transition); }
        .progress-step.active .step-dot { background: white; box-shadow: 0 0 0 3px rgba(255,255,255,0.3); }
        .progress-step.completed .step-dot { background: var(--success); }

        .main-content { max-width: 900px; margin: 0 auto; padding: 24px; }

        .save-status-bar {
            background: white;
            border-radius: var(--border-radius);
            padding: 12px 20px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow-sm);
        }

        .save-status { display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--gray-600); }
        .save-status-icon { width: 8px; height: 8px; border-radius: 50%; background: var(--gray-400); }
        .save-status-icon.saved { background: var(--success); }
        .save-status-icon.saving { background: var(--warning); animation: pulse 1s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

        .btn-save { background: var(--gray-100); color: var(--gray-700); border: none; padding: 8px 16px; border-radius: 6px; font-size: 13px; font-weight: 500; cursor: pointer; transition: var(--transition); }
        .btn-save:hover { background: var(--gray-200); }

        .section-card { background: white; border-radius: var(--border-radius); margin-bottom: 16px; box-shadow: var(--shadow-sm); overflow: hidden; border: 1px solid var(--gray-200); }
        .section-header { padding: 20px 24px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; transition: var(--transition); border-bottom: 1px solid transparent; }
        .section-card.expanded .section-header { border-bottom-color: var(--gray-200); }
        .section-header:hover { background: var(--gray-50); }
        .section-header-left { display: flex; align-items: center; gap: 16px; }
        .section-number { width: 32px; height: 32px; border-radius: 50%; background: var(--gray-100); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 14px; color: var(--gray-600); }
        .section-card.completed .section-number { background: var(--success-light); color: var(--success); }
        .section-card.active .section-number { background: var(--primary); color: white; }
        .section-info h3 { font-size: 16px; font-weight: 600; color: var(--gray-800); margin-bottom: 2px; }
        .section-info p { font-size: 13px; color: var(--gray-500); }
        .status-badge { font-size: 12px; padding: 4px 10px; border-radius: 12px; font-weight: 500; }
        .status-badge.pending { background: var(--gray-100); color: var(--gray-600); }
        .status-badge.completed { background: var(--success-light); color: var(--success); }
        .toggle-icon { font-size: 20px; color: var(--gray-400); transition: transform 0.2s ease; }
        .section-card.expanded .toggle-icon { transform: rotate(180deg); }
        .section-content { display: none; padding: 24px; background: var(--gray-50); }
        .section-card.expanded .section-content { display: block; }

        .applicant-toggle { display: flex; gap: 8px; margin-bottom: 24px; padding: 4px; background: var(--gray-100); border-radius: 8px; width: fit-content; }
        .applicant-btn { padding: 10px 20px; border: none; background: transparent; border-radius: 6px; font-size: 14px; font-weight: 500; color: var(--gray-600); cursor: pointer; transition: var(--transition); }
        .applicant-btn.active { background: white; color: var(--primary); box-shadow: var(--shadow-sm); }
        .applicant-form { display: none; }
        .applicant-form.active { display: block; }

        .form-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .form-group.full-width { grid-column: 1 / -1; }
        .form-label { display: block; font-size: 14px; font-weight: 500; color: var(--gray-700); margin-bottom: 6px; }
        .form-label .required { color: var(--danger); }
        .form-input, .form-select, .form-textarea { width: 100%; padding: 12px 14px; border: 1px solid var(--gray-300); border-radius: 6px; font-size: 15px; color: var(--gray-800); background: white; transition: var(--transition); }
        .form-input:focus, .form-select:focus, .form-textarea:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(45, 32, 71, 0.15); }
        .form-textarea { min-height: 100px; resize: vertical; }
        .form-hint { font-size: 12px; color: var(--gray-500); margin-top: 4px; }

        .option-group { display: flex; flex-wrap: wrap; gap: 12px; }
        .option-item { position: relative; }
        .option-item input { position: absolute; opacity: 0; }
        .option-item label { display: block; padding: 12px 20px; background: white; border: 1px solid var(--gray-300); border-radius: 6px; cursor: pointer; transition: var(--transition); font-size: 14px; }
        .option-item input:checked + label { background: var(--primary); color: white; border-color: var(--primary); }
        .option-item label:hover { border-color: var(--primary); }

        .section-actions { display: flex; justify-content: flex-end; gap: 12px; margin-top: 24px; padding-top: 20px; border-top: 1px solid var(--gray-200); }
        .btn { padding: 12px 24px; border-radius: 6px; font-size: 14px; font-weight: 500; cursor: pointer; transition: var(--transition); border: none; }
        .btn-secondary { background: white; color: var(--gray-700); border: 1px solid var(--gray-300); }
        .btn-secondary:hover { background: var(--gray-50); }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: var(--primary-dark); }
        .btn-success { background: var(--success); color: white; }
        .btn-success:hover { background: #218838; }

        .page-navigation { display: flex; justify-content: space-between; align-items: center; margin-top: 32px; padding: 24px; background: white; border-radius: var(--border-radius); box-shadow: var(--shadow-sm); }
        .nav-btn { display: flex; align-items: center; gap: 8px; padding: 14px 28px; border-radius: 6px; font-size: 15px; font-weight: 500; cursor: pointer; transition: var(--transition); border: none; text-decoration: none; }
        .nav-btn-prev { background: var(--gray-100); color: var(--gray-700); }
        .nav-btn-prev:hover { background: var(--gray-200); }
        .nav-btn-next { background: var(--primary); color: white; }
        .nav-btn-next:hover { background: var(--primary-dark); }
        .nav-btn:disabled { opacity: 0.5; cursor: not-allowed; }

        .info-box { background: #e7f3ff; border: 1px solid #b3d7ff; border-radius: 6px; padding: 16px; margin-bottom: 20px; }
        .info-box p { font-size: 14px; color: #004085; }

        /* Risk Scale Styles */
        .risk-scale { margin: 24px 0; }
        .risk-scale-header { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 12px; color: var(--gray-500); }
        .risk-scale-track { position: relative; height: 40px; background: linear-gradient(to right, #28a745, #ffc107, #dc3545); border-radius: 20px; margin-bottom: 12px; }
        .risk-scale-options { display: flex; justify-content: space-between; }
        .risk-option { flex: 1; text-align: center; }
        .risk-option input { display: none; }
        .risk-option label { display: block; padding: 10px 5px; cursor: pointer; font-size: 13px; color: var(--gray-600); border-radius: 6px; transition: var(--transition); }
        .risk-option input:checked + label { background: var(--primary); color: white; font-weight: 600; }
        .risk-option label:hover { background: var(--gray-100); }

        .experience-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; }
        .experience-card { background: white; border: 1px solid var(--gray-200); border-radius: 8px; padding: 16px; transition: var(--transition); }
        .experience-card:hover { border-color: var(--primary); }
        .experience-card.selected { border-color: var(--primary); background: rgba(45, 32, 71, 0.08); }
        .experience-card h4 { font-size: 14px; font-weight: 600; margin-bottom: 8px; color: var(--gray-800); }
        .experience-card p { font-size: 12px; color: var(--gray-500); margin-bottom: 12px; }
        .experience-select { width: 100%; padding: 8px 12px; border: 1px solid var(--gray-300); border-radius: 4px; font-size: 13px; }

        .objective-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-top: 16px; }
        .objective-card { position: relative; background: white; border: 2px solid var(--gray-200); border-radius: 12px; padding: 20px; text-align: center; cursor: pointer; transition: var(--transition); }
        .objective-card:hover { border-color: var(--primary-light); }
        .objective-card.selected { border-color: var(--primary); background: rgba(45, 32, 71, 0.08); }
        .objective-card input { position: absolute; opacity: 0; }
        .objective-icon { font-size: 32px; margin-bottom: 12px; }
        .objective-card h4 { font-size: 15px; font-weight: 600; margin-bottom: 8px; color: var(--gray-800); }
        .objective-card p { font-size: 12px; color: var(--gray-500); line-height: 1.5; }

        .timeline-options { display: flex; gap: 16px; margin-top: 16px; }
        .timeline-card { flex: 1; position: relative; background: white; border: 2px solid var(--gray-200); border-radius: 12px; padding: 24px; text-align: center; cursor: pointer; transition: var(--transition); }
        .timeline-card:hover { border-color: var(--primary-light); }
        .timeline-card.selected { border-color: var(--primary); background: rgba(45, 32, 71, 0.08); }
        .timeline-card input { position: absolute; opacity: 0; }
        .timeline-years { font-size: 28px; font-weight: 700; color: var(--primary); margin-bottom: 8px; }
        .timeline-label { font-size: 14px; font-weight: 600; color: var(--gray-700); margin-bottom: 4px; }
        .timeline-desc { font-size: 12px; color: var(--gray-500); }

        @media (max-width: 768px) {
            .main-content { padding: 16px; }
            .form-row { grid-template-columns: 1fr; }
            .page-navigation { flex-direction: column; gap: 12px; }
            .nav-btn { width: 100%; justify-content: center; }
            .timeline-options { flex-direction: column; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-top">
            <div class="logo">Evelyn Partners</div>
            <span class="type-badge" id="applicationTypeBadge">Individual</span>
        </div>
        <div class="header-main">
            <div class="journey-title">Fact Find A ‚Ä¢ Section 3 of 6</div>
            <h1 class="section-title">Investment Suitability</h1>
            <p class="section-description">Your investment experience, objectives, and risk preferences</p>
        </div>
        <div class="progress-container">
            <div class="progress-label">
                <span>Section Progress</span>
                <span id="progressPercent">0% Complete</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-steps">
                <div class="progress-step active" data-section="1"><div class="step-dot"></div><span>Experience</span></div>
                <div class="progress-step" data-section="2"><div class="step-dot"></div><span>Objectives</span></div>
                <div class="progress-step" data-section="3"><div class="step-dot"></div><span>Risk</span></div>
                <div class="progress-step" data-section="4"><div class="step-dot"></div><span>Horizon</span></div>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="save-status-bar">
            <div class="save-status">
                <div class="save-status-icon" id="saveStatusIcon"></div>
                <span id="saveStatusText">All changes saved</span>
            </div>
            <div style="display: flex; gap: 12px;">
                <button class="btn-save" onclick="saveProgress()">üíæ Save Progress</button>
                <button class="btn-save" onclick="clearForm()">üóëÔ∏è Clear Form</button>
            </div>
        </div>

        <!-- Section 13: Investment Experience -->
        <div class="section-card expanded" data-section="1" id="section1">
            <div class="section-header" onclick="toggleSection(1)">
                <div class="section-header-left">
                    <div class="section-number">13</div>
                    <div class="section-info">
                        <h3>Investment Experience</h3>
                        <p>Your familiarity with different investment types</p>
                    </div>
                </div>
                <div class="section-status">
                    <span class="status-badge pending" id="status1">Not started</span>
                    <span class="toggle-icon">‚ñº</span>
                </div>
            </div>
            <div class="section-content">
                <div class="applicant-toggle" id="applicantToggle1" style="display: none;">
                    <button class="applicant-btn active" onclick="switchApplicant(1, 1)">Primary Applicant</button>
                    <button class="applicant-btn" onclick="switchApplicant(1, 2)">Joint Applicant</button>
                </div>

                <div class="applicant-form active" id="applicant1Form1">
                    <div class="info-box">
                        <p>‚ÑπÔ∏è Understanding your investment experience helps us ensure recommendations are suitable for you. Please rate your experience with each investment type.</p>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Overall Investment Knowledge <span class="required">*</span></label>
                        <div class="option-group">
                            <div class="option-item">
                                <input type="radio" name="investmentKnowledge" id="knowNone" value="none" onchange="handleFieldChange('investmentKnowledge', 'none')">
                                <label for="knowNone">None</label>
                            </div>
                            <div class="option-item">
                                <input type="radio" name="investmentKnowledge" id="knowBasic" value="basic" onchange="handleFieldChange('investmentKnowledge', 'basic')">
                                <label for="knowBasic">Basic</label>
                            </div>
                            <div class="option-item">
                                <input type="radio" name="investmentKnowledge" id="knowGood" value="good" onchange="handleFieldChange('investmentKnowledge', 'good')">
                                <label for="knowGood">Good</label>
                            </div>
                            <div class="option-item">
                                <input type="radio" name="investmentKnowledge" id="knowExtensive" value="extensive" onchange="handleFieldChange('investmentKnowledge', 'extensive')">
                                <label for="knowExtensive">Extensive</label>
                            </div>
                        </div>
                    </div>

                    <div class="experience-grid" style="margin-top: 24px;">
                        <div class="experience-card">
                            <h4>Equities/Shares</h4>
                            <p>Individual company stocks and shares</p>
                            <select class="experience-select" id="expEquities" onchange="handleFieldChange('expEquities', this.value)">
                                <option value="">Select experience</option>
                                <option value="none">No experience</option>
                                <option value="limited">Limited (1-2 years)</option>
                                <option value="moderate">Moderate (3-5 years)</option>
                                <option value="extensive">Extensive (5+ years)</option>
                            </select>
                        </div>
                        <div class="experience-card">
                            <h4>Funds (OEICs/Unit Trusts)</h4>
                            <p>Pooled investment funds managed by professionals</p>
                            <select class="experience-select" id="expFunds" onchange="handleFieldChange('expFunds', this.value)">
                                <option value="">Select experience</option>
                                <option value="none">No experience</option>
                                <option value="limited">Limited (1-2 years)</option>
                                <option value="moderate">Moderate (3-5 years)</option>
                                <option value="extensive">Extensive (5+ years)</option>
                            </select>
                        </div>
                        <div class="experience-card">
                            <h4>Bonds/Fixed Income</h4>
                            <p>Government and corporate bonds</p>
                            <select class="experience-select" id="expBonds" onchange="handleFieldChange('expBonds', this.value)">
                                <option value="">Select experience</option>
                                <option value="none">No experience</option>
                                <option value="limited">Limited (1-2 years)</option>
                                <option value="moderate">Moderate (3-5 years)</option>
                                <option value="extensive">Extensive (5+ years)</option>
                            </select>
                        </div>
                        <div class="experience-card">
                            <h4>ISAs</h4>
                            <p>Tax-efficient savings accounts</p>
                            <select class="experience-select" id="expISA" onchange="handleFieldChange('expISA', this.value)">
                                <option value="">Select experience</option>
                                <option value="none">No experience</option>
                                <option value="limited">Limited (1-2 years)</option>
                                <option value="moderate">Moderate (3-5 years)</option>
                                <option value="extensive">Extensive (5+ years)</option>
                            </select>
                        </div>
                        <div class="experience-card">
                            <h4>Pensions/SIPPs</h4>
                            <p>Retirement savings and self-invested pensions</p>
                            <select class="experience-select" id="expPension" onchange="handleFieldChange('expPension', this.value)">
                                <option value="">Select experience</option>
                                <option value="none">No experience</option>
                                <option value="limited">Limited (1-2 years)</option>
                                <option value="moderate">Moderate (3-5 years)</option>
                                <option value="extensive">Extensive (5+ years)</option>
                            </select>
                        </div>
                        <div class="experience-card">
                            <h4>AIM/Smaller Companies</h4>
                            <p>Alternative Investment Market shares</p>
                            <select class="experience-select" id="expAIM" onchange="handleFieldChange('expAIM', this.value)">
                                <option value="">Select experience</option>
                                <option value="none">No experience</option>
                                <option value="limited">Limited (1-2 years)</option>
                                <option value="moderate">Moderate (3-5 years)</option>
                                <option value="extensive">Extensive (5+ years)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row" style="margin-top: 24px;">
                        <div class="form-group">
                            <label class="form-label">How many years have you been investing?</label>
                            <select class="form-select" id="yearsInvesting" onchange="handleFieldChange('yearsInvesting', this.value)">
                                <option value="">Select</option>
                                <option value="0">New to investing</option>
                                <option value="1-3">1-3 years</option>
                                <option value="3-5">3-5 years</option>
                                <option value="5-10">5-10 years</option>
                                <option value="10+">10+ years</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Approximate value of existing investments</label>
                            <select class="form-select" id="existingInvestmentValue" onchange="handleFieldChange('existingInvestmentValue', this.value)">
                                <option value="">Select</option>
                                <option value="none">None</option>
                                <option value="under-50k">Under ¬£50,000</option>
                                <option value="50k-100k">¬£50,000 - ¬£100,000</option>
                                <option value="100k-250k">¬£100,000 - ¬£250,000</option>
                                <option value="250k-500k">¬£250,000 - ¬£500,000</option>
                                <option value="500k+">¬£500,000+</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="applicant-form" id="applicant2Form1">
                    <div class="form-group">
                        <label class="form-label">Overall Investment Knowledge</label>
                        <div class="option-group">
                            <div class="option-item">
                                <input type="radio" name="investmentKnowledge_customer2" id="knowNone2" value="none" onchange="handleFieldChange('investmentKnowledge_customer2', 'none')">
                                <label for="knowNone2">None</label>
                            </div>
                            <div class="option-item">
                                <input type="radio" name="investmentKnowledge_customer2" id="knowBasic2" value="basic" onchange="handleFieldChange('investmentKnowledge_customer2', 'basic')">
                                <label for="knowBasic2">Basic</label>
                            </div>
                            <div class="option-item">
                                <input type="radio" name="investmentKnowledge_customer2" id="knowGood2" value="good" onchange="handleFieldChange('investmentKnowledge_customer2', 'good')">
                                <label for="knowGood2">Good</label>
                            </div>
                            <div class="option-item">
                                <input type="radio" name="investmentKnowledge_customer2" id="knowExtensive2" value="extensive" onchange="handleFieldChange('investmentKnowledge_customer2', 'extensive')">
                                <label for="knowExtensive2">Extensive</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-row" style="margin-top: 16px;">
                        <div class="form-group">
                            <label class="form-label">Years Investing</label>
                            <select class="form-select" id="yearsInvesting_customer2" onchange="handleFieldChange('yearsInvesting_customer2', this.value)">
                                <option value="">Select</option>
                                <option value="0">New to investing</option>
                                <option value="1-3">1-3 years</option>
                                <option value="3-5">3-5 years</option>
                                <option value="5-10">5-10 years</option>
                                <option value="10+">10+ years</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="section-actions">
                    <button class="btn btn-primary" onclick="completeSection(1)">Continue ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Section 14: Investment Objectives -->
        <div class="section-card" data-section="2" id="section2">
            <div class="section-header" onclick="toggleSection(2)">
                <div class="section-header-left">
                    <div class="section-number">14</div>
                    <div class="section-info">
                        <h3>Investment Objectives</h3>
                        <p>What you want to achieve with your investments</p>
                    </div>
                </div>
                <div class="section-status">
                    <span class="status-badge pending" id="status2">Not started</span>
                    <span class="toggle-icon">‚ñº</span>
                </div>
            </div>
            <div class="section-content">
                <div class="info-box">
                    <p>‚ÑπÔ∏è For joint applications, investment objectives should reflect the shared goals of both applicants.</p>
                </div>

                <div class="form-group">
                    <label class="form-label">Primary Investment Objective <span class="required">*</span></label>
                    <p class="form-hint">Select the objective that best matches your goals</p>
                </div>

                <div class="objective-cards">
                    <label class="objective-card" onclick="selectObjective('income')">
                        <input type="radio" name="primaryObjective" value="income" onchange="handleFieldChange('primaryObjective', 'income')">
                        <div class="objective-icon">üí∞</div>
                        <h4>Income for Distribution</h4>
                        <p>Generate regular income from dividends and interest to supplement earnings or retirement</p>
                    </label>
                    <label class="objective-card" onclick="selectObjective('balanced')">
                        <input type="radio" name="primaryObjective" value="balanced" onchange="handleFieldChange('primaryObjective', 'balanced')">
                        <div class="objective-icon">‚öñÔ∏è</div>
                        <h4>Balanced Growth & Income</h4>
                        <p>A mix of capital appreciation and income generation for steady returns</p>
                    </label>
                    <label class="objective-card" onclick="selectObjective('growth')">
                        <input type="radio" name="primaryObjective" value="growth" onchange="handleFieldChange('primaryObjective', 'growth')">
                        <div class="objective-icon">üìà</div>
                        <h4>Capital Growth</h4>
                        <p>Focus on growing the value of investments over time, reinvesting any income</p>
                    </label>
                </div>

                <div class="form-group" style="margin-top: 32px;">
                    <label class="form-label">Investment Purpose</label>
                    <p class="form-hint" style="margin-bottom: 12px;">What is the main reason for this investment? Select all that apply.</p>
                    <div class="option-group" style="flex-direction: column; gap: 8px;">
                        <div class="option-item" style="width: 100%;">
                            <input type="checkbox" id="purposeRetirement" value="retirement" onchange="handlePurposeChange('retirement', this.checked)">
                            <label for="purposeRetirement" style="width: 100%;">Retirement planning</label>
                        </div>
                        <div class="option-item" style="width: 100%;">
                            <input type="checkbox" id="purposeWealth" value="wealth" onchange="handlePurposeChange('wealth', this.checked)">
                            <label for="purposeWealth" style="width: 100%;">Building long-term wealth</label>
                        </div>
                        <div class="option-item" style="width: 100%;">
                            <input type="checkbox" id="purposeIncome" value="income" onchange="handlePurposeChange('income', this.checked)">
                            <label for="purposeIncome" style="width: 100%;">Generating income</label>
                        </div>
                        <div class="option-item" style="width: 100%;">
                            <input type="checkbox" id="purposeIHT" value="iht" onchange="handlePurposeChange('iht', this.checked)">
                            <label for="purposeIHT" style="width: 100%;">Inheritance tax planning</label>
                        </div>
                        <div class="option-item" style="width: 100%;">
                            <input type="checkbox" id="purposeEducation" value="education" onchange="handlePurposeChange('education', this.checked)">
                            <label for="purposeEducation" style="width: 100%;">Education funding (children/grandchildren)</label>
                        </div>
                        <div class="option-item" style="width: 100%;">
                            <input type="checkbox" id="purposeProperty" value="property" onchange="handlePurposeChange('property', this.checked)">
                            <label for="purposeProperty" style="width: 100%;">Saving for property purchase</label>
                        </div>
                    </div>
                </div>

                <div class="section-actions">
                    <button class="btn btn-secondary" onclick="goToSection(1)">‚Üê Previous</button>
                    <button class="btn btn-primary" onclick="completeSection(2)">Continue ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Section 15: Risk Tolerance -->
        <div class="section-card" data-section="3" id="section3">
            <div class="section-header" onclick="toggleSection(3)">
                <div class="section-header-left">
                    <div class="section-number">15</div>
                    <div class="section-info">
                        <h3>Risk Tolerance</h3>
                        <p>Your comfort level with investment volatility</p>
                    </div>
                </div>
                <div class="section-status">
                    <span class="status-badge pending" id="status3">Not started</span>
                    <span class="toggle-icon">‚ñº</span>
                </div>
            </div>
            <div class="section-content">
                <div class="applicant-toggle" id="applicantToggle3" style="display: none;">
                    <button class="applicant-btn active" onclick="switchApplicant(3, 1)">Primary Applicant</button>
                    <button class="applicant-btn" onclick="switchApplicant(3, 2)">Joint Applicant</button>
                </div>

                <div class="applicant-form active" id="applicant1Form3">
                    <div class="info-box">
                        <p>‚ÑπÔ∏è Higher risk investments have potential for higher returns but also greater potential for loss. Your risk tolerance should reflect both your financial capacity and emotional comfort with market fluctuations.</p>
                    </div>

                    <div class="form-group">
                        <label class="form-label">How would you describe your attitude to risk? <span class="required">*</span></label>
                    </div>

                    <div class="risk-scale">
                        <div class="risk-scale-header">
                            <span>Lower Risk</span>
                            <span>Higher Risk</span>
                        </div>
                        <div class="risk-scale-track"></div>
                        <div class="risk-scale-options">
                            <div class="risk-option">
                                <input type="radio" name="riskAttitude" id="risk1" value="1" onchange="handleFieldChange('riskAttitude', '1')">
                                <label for="risk1">1<br><small>Very Cautious</small></label>
                            </div>
                            <div class="risk-option">
                                <input type="radio" name="riskAttitude" id="risk2" value="2" onchange="handleFieldChange('riskAttitude', '2')">
                                <label for="risk2">2<br><small>Cautious</small></label>
                            </div>
                            <div class="risk-option">
                                <input type="radio" name="riskAttitude" id="risk3" value="3" onchange="handleFieldChange('riskAttitude', '3')">
                                <label for="risk3">3<br><small>Low-Medium</small></label>
                            </div>
                            <div class="risk-option">
                                <input type="radio" name="riskAttitude" id="risk4" value="4" onchange="handleFieldChange('riskAttitude', '4')">
                                <label for="risk4">4<br><small>Medium</small></label>
                            </div>
                            <div class="risk-option">
                                <input type="radio" name="riskAttitude" id="risk5" value="5" onchange="handleFieldChange('riskAttitude', '5')">
                                <label for="risk5">5<br><small>Medium-High</small></label>
                            </div>
                            <div class="risk-option">
                                <input type="radio" name="riskAttitude" id="risk6" value="6" onchange="handleFieldChange('riskAttitude', '6')">
                                <label for="risk6">6<br><small>High</small></label>
                            </div>
                            <div class="risk-option">
                                <input type="radio" name="riskAttitude" id="risk7" value="7" onchange="handleFieldChange('riskAttitude', '7')">
                                <label for="risk7">7<br><small>Adventurous</small></label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" style="margin-top: 32px;">
                        <label class="form-label">If your investments fell by 20% in value, what would you do? <span class="required">*</span></label>
                        <div class="option-group" style="flex-direction: column; gap: 8px; margin-top: 12px;">
                            <div class="option-item" style="width: 100%;">
                                <input type="radio" name="lossReaction" id="lossSell" value="sell" onchange="handleFieldChange('lossReaction', 'sell')">
                                <label for="lossSell" style="width: 100%;">Sell immediately to prevent further losses</label>
                            </div>
                            <div class="option-item" style="width: 100%;">
                                <input type="radio" name="lossReaction" id="lossWorried" value="worried" onchange="handleFieldChange('lossReaction', 'worried')">
                                <label for="lossWorried" style="width: 100%;">Feel very uncomfortable but hold on</label>
                            </div>
                            <div class="option-item" style="width: 100%;">
                                <input type="radio" name="lossReaction" id="lossAccept" value="accept" onchange="handleFieldChange('lossReaction', 'accept')">
                                <label for="lossAccept" style="width: 100%;">Accept it as normal market volatility and wait for recovery</label>
                            </div>
                            <div class="option-item" style="width: 100%;">
                                <input type="radio" name="lossReaction" id="lossBuy" value="buy" onchange="handleFieldChange('lossReaction', 'buy')">
                                <label for="lossBuy" style="width: 100%;">See it as a buying opportunity and invest more</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" style="margin-top: 24px;">
                        <label class="form-label">What percentage loss could you tolerate in any single year? <span class="required">*</span></label>
                        <div class="option-group" style="margin-top: 12px;">
                            <div class="option-item">
                                <input type="radio" name="lossCapacity" id="loss5" value="5" onchange="handleFieldChange('lossCapacity', '5')">
                                <label for="loss5">Up to 5%</label>
                            </div>
                            <div class="option-item">
                                <input type="radio" name="lossCapacity" id="loss10" value="10" onchange="handleFieldChange('lossCapacity', '10')">
                                <label for="loss10">Up to 10%</label>
                            </div>
                            <div class="option-item">
                                <input type="radio" name="lossCapacity" id="loss15" value="15" onchange="handleFieldChange('lossCapacity', '15')">
                                <label for="loss15">Up to 15%</label>
                            </div>
                            <div class="option-item">
                                <input type="radio" name="lossCapacity" id="loss20" value="20" onchange="handleFieldChange('lossCapacity', '20')">
                                <label for="loss20">Up to 20%</label>
                            </div>
                            <div class="option-item">
                                <input type="radio" name="lossCapacity" id="loss25" value="25" onchange="handleFieldChange('lossCapacity', '25')">
                                <label for="loss25">25%+</label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="applicant-form" id="applicant2Form3">
                    <div class="form-group">
                        <label class="form-label">Attitude to Risk</label>
                        <select class="form-select" id="riskAttitude_customer2" onchange="handleFieldChange('riskAttitude_customer2', this.value)">
                            <option value="">Select</option>
                            <option value="1">1 - Very Cautious</option>
                            <option value="2">2 - Cautious</option>
                            <option value="3">3 - Low-Medium</option>
                            <option value="4">4 - Medium</option>
                            <option value="5">5 - Medium-High</option>
                            <option value="6">6 - High</option>
                            <option value="7">7 - Adventurous</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin-top: 16px;">
                        <label class="form-label">Maximum tolerable loss per year</label>
                        <select class="form-select" id="lossCapacity_customer2" onchange="handleFieldChange('lossCapacity_customer2', this.value)">
                            <option value="">Select</option>
                            <option value="5">Up to 5%</option>
                            <option value="10">Up to 10%</option>
                            <option value="15">Up to 15%</option>
                            <option value="20">Up to 20%</option>
                            <option value="25">25%+</option>
                        </select>
                    </div>
                </div>

                <div class="section-actions">
                    <button class="btn btn-secondary" onclick="goToSection(2)">‚Üê Previous</button>
                    <button class="btn btn-primary" onclick="completeSection(3)">Continue ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Section 16: Investment Horizon -->
        <div class="section-card" data-section="4" id="section4">
            <div class="section-header" onclick="toggleSection(4)">
                <div class="section-header-left">
                    <div class="section-number">16</div>
                    <div class="section-info">
                        <h3>Investment Horizon</h3>
                        <p>How long you plan to remain invested</p>
                    </div>
                </div>
                <div class="section-status">
                    <span class="status-badge pending" id="status4">Not started</span>
                    <span class="toggle-icon">‚ñº</span>
                </div>
            </div>
            <div class="section-content">
                <div class="info-box">
                    <p>‚ÑπÔ∏è Your investment time horizon affects the types of investments that may be suitable. Longer time horizons generally allow for more growth-focused strategies.</p>
                </div>

                <div class="form-group">
                    <label class="form-label">When do you expect to need access to this investment? <span class="required">*</span></label>
                </div>

                <div class="timeline-options">
                    <label class="timeline-card" onclick="selectTimeline('short')">
                        <input type="radio" name="investmentHorizon" value="short" onchange="handleFieldChange('investmentHorizon', 'short')">
                        <div class="timeline-years">2-3</div>
                        <div class="timeline-label">Short Term</div>
                        <div class="timeline-desc">years</div>
                    </label>
                    <label class="timeline-card" onclick="selectTimeline('medium')">
                        <input type="radio" name="investmentHorizon" value="medium" onchange="handleFieldChange('investmentHorizon', 'medium')">
                        <div class="timeline-years">4-6</div>
                        <div class="timeline-label">Medium Term</div>
                        <div class="timeline-desc">years</div>
                    </label>
                    <label class="timeline-card" onclick="selectTimeline('long')">
                        <input type="radio" name="investmentHorizon" value="long" onchange="handleFieldChange('investmentHorizon', 'long')">
                        <div class="timeline-years">7+</div>
                        <div class="timeline-label">Long Term</div>
                        <div class="timeline-desc">years</div>
                    </label>
                </div>

                <div class="form-group" style="margin-top: 32px;">
                    <label class="form-label">Do you anticipate needing to withdraw any of these funds before your stated time horizon?</label>
                    <div class="option-group" style="margin-top: 12px;">
                        <div class="option-item">
                            <input type="radio" name="earlyWithdrawal" id="withdrawNo" value="no" onchange="handleFieldChange('earlyWithdrawal', 'no')">
                            <label for="withdrawNo">No, unlikely</label>
                        </div>
                        <div class="option-item">
                            <input type="radio" name="earlyWithdrawal" id="withdrawPossible" value="possible" onchange="handleFieldChange('earlyWithdrawal', 'possible')">
                            <label for="withdrawPossible">Possibly</label>
                        </div>
                        <div class="option-item">
                            <input type="radio" name="earlyWithdrawal" id="withdrawLikely" value="likely" onchange="handleFieldChange('earlyWithdrawal', 'likely')">
                            <label for="withdrawLikely">Yes, likely</label>
                        </div>
                    </div>
                </div>

                <div class="form-group" style="margin-top: 24px;">
                    <label class="form-label">What portion of the investment might you need to access?</label>
                    <select class="form-select" id="accessPortion" onchange="handleFieldChange('accessPortion', this.value)">
                        <option value="">Select</option>
                        <option value="none">None - fully committed</option>
                        <option value="small">Small amount (up to 10%)</option>
                        <option value="moderate">Moderate amount (10-25%)</option>
                        <option value="significant">Significant amount (25-50%)</option>
                        <option value="large">Large portion (50%+)</option>
                    </select>
                </div>

                <div class="section-actions">
                    <button class="btn btn-secondary" onclick="goToSection(3)">‚Üê Previous</button>
                    <button class="btn btn-success" onclick="completeSection(4); completeForm()">Complete Section ‚úì</button>
                </div>
            </div>
        </div>

        <div class="page-navigation">
            <a href="factfind_02_financial_profile.html" class="nav-btn nav-btn-prev">‚Üê Back to Financial Profile</a>
            <button class="nav-btn nav-btn-next" onclick="proceedToNextForm()" id="nextFormBtn" disabled>
                Continue to AML/Compliance ‚Üí
            </button>
        </div>
    </main>

    <script>
        const STORAGE_KEY = 'evelynFactFindSuitability';
        const TOTAL_SECTIONS = 4;
        
        let formData = {};
        let sectionStatus = {};
        let isJointApplication = false;
        let saveTimeout = null;
        let selectedPurposes = [];

        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            isJointApplication = urlParams.get('type') === 'joint';
            
            if (isJointApplication) {
                document.getElementById('applicationTypeBadge').textContent = 'Joint Application';
                document.querySelectorAll('.applicant-toggle').forEach(el => el.style.display = 'flex');
            }

            loadSavedData();
            for (let i = 1; i <= TOTAL_SECTIONS; i++) {
                if (!sectionStatus[i]) sectionStatus[i] = 'pending';
                updateSectionUI(i);
            }
            updateProgress();
        });

        function loadSavedData() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                const parsed = JSON.parse(saved);
                formData = parsed.formData || {};
                sectionStatus = parsed.sectionStatus || {};
                
                Object.keys(formData).forEach(key => {
                    const value = formData[key];
                    
                    const element = document.getElementById(key);
                    if (element) {
                        if (element.type === 'checkbox') {
                            element.checked = value === true || value === 'true' || value === 'on';
                        } else {
                            element.value = value;
                        }
                    }
                    
                    // Also check for radio buttons by name
                    const radios = document.querySelectorAll(`input[type="radio"][name="${key}"]`);
                    if (radios.length > 0) {
                        radios.forEach(radio => {
                            if (radio.value === value) {
                                radio.checked = true;
                            }
                        });
                    }
                });
                
                restoreConditionalSections();
                updateSaveStatus('saved');
            }
        }
        
        function restoreConditionalSections() {
            // Investment experience level conditionals
            const expLevel = formData.investmentExperience;
            if (expLevel === 'experienced' || expLevel === 'sophisticated') {
                const expDetails = document.getElementById('experienceDetails');
                if (expDetails) expDetails.classList.add('visible');
            }
            
            // Restore objective card selection visual state
            if (formData.primaryObjective) {
                document.querySelectorAll('.objective-card').forEach(card => {
                    const radio = card.querySelector('input[type="radio"]');
                    if (radio && radio.value === formData.primaryObjective) {
                        card.classList.add('selected');
                    }
                });
            }
            
            // Restore timeline card selection visual state
            if (formData.investmentHorizon) {
                document.querySelectorAll('.timeline-card').forEach(card => {
                    const radio = card.querySelector('input[type="radio"]');
                    if (radio && radio.value === formData.investmentHorizon) {
                        card.classList.add('selected');
                    }
                });
            }
            
            // Restore investment purpose checkboxes
            if (formData.investmentPurposes) {
                const purposes = formData.investmentPurposes.split(',');
                purposes.forEach(purpose => {
                    const purposeMap = {
                        'retirement': 'purposeRetirement',
                        'wealth': 'purposeWealth',
                        'income': 'purposeIncome',
                        'iht': 'purposeIHT',
                        'education': 'purposeEducation',
                        'property': 'purposeProperty'
                    };
                    const checkboxId = purposeMap[purpose];
                    if (checkboxId) {
                        const checkbox = document.getElementById(checkboxId);
                        if (checkbox) checkbox.checked = true;
                    }
                });
            }
        }

        function saveProgress() {
            const dataToSave = { formData, sectionStatus, lastSaved: new Date().toISOString() };
            localStorage.setItem(STORAGE_KEY, JSON.stringify(dataToSave));
            updateSaveStatus('saved');
        }

        function handleFieldChange(fieldName, value) {
            formData[fieldName] = value;
            updateSaveStatus('saving');
            clearTimeout(saveTimeout);
            saveTimeout = setTimeout(() => saveProgress(), 500);
        }

        function updateSaveStatus(status) {
            const icon = document.getElementById('saveStatusIcon');
            const text = document.getElementById('saveStatusText');
            icon.className = 'save-status-icon';
            if (status === 'saved') { icon.classList.add('saved'); text.textContent = 'All changes saved'; }
            else if (status === 'saving') { icon.classList.add('saving'); text.textContent = 'Saving...'; }
        }

        function clearForm() {
            if (confirm('Clear all data?')) { localStorage.removeItem(STORAGE_KEY); location.reload(); }
        }

        // Scroll to section with offset to account for sticky header
        function scrollToSectionWithOffset(element) {
            const header = document.querySelector('.header');
            const headerHeight = header ? header.offsetHeight : 0;
            const offset = headerHeight + 20;
            const elementPosition = element.getBoundingClientRect().top;
            const currentScrollPosition = window.pageYOffset;
            const targetPosition = currentScrollPosition + elementPosition - offset;
            window.scrollTo({ top: targetPosition, behavior: 'smooth' });
        }

        function toggleSection(sectionNum) {
            const section = document.getElementById(`section${sectionNum}`);
            const wasExpanded = section.classList.contains('expanded');
            document.querySelectorAll('.section-card').forEach(card => card.classList.remove('expanded'));
            if (!wasExpanded) {
                section.classList.add('expanded');
                setTimeout(() => scrollToSectionWithOffset(section), 100);
            }
        }

        function goToSection(sectionNum) { toggleSection(sectionNum); }

        function completeSection(sectionNum) {
            sectionStatus[sectionNum] = 'completed';
            updateSectionUI(sectionNum);
            saveProgress();
            if (sectionNum < TOTAL_SECTIONS) toggleSection(sectionNum + 1);
            updateProgress();
        }

        function updateSectionUI(sectionNum) {
            const section = document.getElementById(`section${sectionNum}`);
            const statusBadge = document.getElementById(`status${sectionNum}`);
            const progressStep = document.querySelector(`.progress-step[data-section="${sectionNum}"]`);
            section.classList.remove('completed');
            progressStep.classList.remove('completed', 'active');
            if (sectionStatus[sectionNum] === 'completed') {
                section.classList.add('completed');
                statusBadge.className = 'status-badge completed';
                statusBadge.textContent = 'Completed';
                progressStep.classList.add('completed');
            } else {
                statusBadge.className = 'status-badge pending';
                statusBadge.textContent = 'Not started';
            }
        }

        function updateProgress() {
            const completed = Object.values(sectionStatus).filter(s => s === 'completed').length;
            const percent = Math.round((completed / TOTAL_SECTIONS) * 100);
            document.getElementById('progressFill').style.width = `${percent}%`;
            document.getElementById('progressPercent').textContent = `${percent}% Complete`;
            document.getElementById('nextFormBtn').disabled = completed !== TOTAL_SECTIONS;
        }

        function switchApplicant(sectionNum, applicantNum) {
            const toggle = document.getElementById(`applicantToggle${sectionNum}`);
            toggle.querySelectorAll('.applicant-btn').forEach((btn, i) => btn.classList.toggle('active', i + 1 === applicantNum));
            document.getElementById(`applicant1Form${sectionNum}`).classList.toggle('active', applicantNum === 1);
            document.getElementById(`applicant2Form${sectionNum}`).classList.toggle('active', applicantNum === 2);
        }

        function selectObjective(obj) {
            document.querySelectorAll('.objective-card').forEach(card => card.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
        }

        function selectTimeline(timeline) {
            document.querySelectorAll('.timeline-card').forEach(card => card.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
        }

        function handlePurposeChange(purpose, checked) {
            if (checked) { if (!selectedPurposes.includes(purpose)) selectedPurposes.push(purpose); }
            else { selectedPurposes = selectedPurposes.filter(p => p !== purpose); }
            handleFieldChange('investmentPurposes', selectedPurposes.join(','));
        }

        function proceedToNextForm() {
            saveProgress();
            const type = isJointApplication ? 'joint' : 'individual';
            window.location.href = `factfind_04_aml_compliance.html?type=${type}`;
        }

        function completeForm() {
            const masterData = JSON.parse(localStorage.getItem('evelynFactFindMaster') || '{}');
            masterData.investmentSuitability = { complete: true, timestamp: new Date().toISOString() };
            localStorage.setItem('evelynFactFindMaster', JSON.stringify(masterData));
        }
    </script>
</body>
</html>
